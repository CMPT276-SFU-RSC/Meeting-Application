<nav class="navbar navbar-expand-lg" th:fragment="navbar" style="background-color: #A5192E">
    <main class="container-fluid">
        <a class="navbar-brand" href="/"> </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <fieldset class="collapse navbar-collapse justify-content-between" id="navbarNavDropdown">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="btn btn-primary ml" style="color: #FFD700;" href="/">Home</a>
                <li class="nav-item dropdown" th:if="${user.isOrganizer}">
                    <a class="btn btn-primary ml dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Admin
                    </a>
                    <ul class="dropdown-menu m2" aria-labelledby="navbarDropdownMenuLink">
                        <li><a class="dropdown-item" href="/polls/create">Create Poll</a></li>
                        <li><a class="dropdown-item" href="/admins/userdisplay">All Users</a></li>
                    </ul>
                </li>
                <a class="btn btn-primary ml" aria-current="page" href="/polls/create">Create Poll <i
                        class="fas fa-plus"></i></a>
                <a class="btn btn-primary ml" aria-current="page" href="/users/profile">Profile</a>
                <a class="btn btn-primary ml" href="/logout" onclick="clearSession()">Log Out</a>
                </li>
        </fieldset>

        <!--Dark Mode button, putting on navbar for more accessiblility for now-->
        <button id="darkModeBtn"><i class="fas fa-moon"></i></button>
    </main>
    <script>
        // Check if dark mode is enabled initially
        const isDarkMode = localStorage.getItem("darkmode") === "true";

        // Function to toggle dark mode
        function toggleDarkMode() {
            const isCurrentlyDarkMode = document.body.classList.contains('dark-mode');
            document.body.classList.toggle('dark-mode');

            // Update localStorage based on current state
            localStorage.setItem("darkmode", !isCurrentlyDarkMode);
        }

        // Add event listener to dark mode button
        document.getElementById('darkModeBtn').addEventListener('click', function () {
            toggleDarkMode();
        });

        // Set initial dark mode state
        if (isDarkMode) {
            toggleDarkMode();
        }
    </script>
</nav>
